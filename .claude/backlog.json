{
  "version": "1.0.0",
  "updated_at": "2025-12-12T19:59:47.515Z",
  "tasks": [
    {
      "id": "T-P8-001",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update TEMPLATE.project.md with decomposition guidance",
      "description": "Add section on task decomposition using ///LOCAL_TASKS format, reference DECOMPOSITION_POLICY.md, include atomic criteria reminder",
      "files_touched": [
        "docs/projects/TEMPLATE.project.md"
      ],
      "est_lines_changed": 30,
      "est_local_effort_mins": 20,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('docs/projects/TEMPLATE.project.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS') || !content.includes('DECOMPOSITION_POLICY')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current template structure",
        "DECOMPOSITION_POLICY.md reference"
      ],
      "outputs": [
        "Updated template with decomposition section"
      ],
      "constraints": [
        "Add section after 'Before Starting Each Phase'",
        "Include reference to .claude/DECOMPOSITION_POLICY.md",
        "Add atomic criteria reminder table",
        "Keep changes minimal, preserve existing structure"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 1,
          "lines_end": 100
        }
      ],
      "invariant_test": null,
      "assigned_at": "2025-12-12T05:58:50.636Z",
      "completed_at": "2025-12-12T06:01:03.937Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-002",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update program-manager.md agent guide",
      "description": "Add reference to decomposition policy enforcement in program manager responsibilities",
      "files_touched": [
        ".claude/agents/program-manager.md"
      ],
      "est_lines_changed": 15,
      "est_local_effort_mins": 15,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/agents/program-manager.md', 'utf-8'); if (!content.includes('DECOMPOSITION_POLICY') || !content.includes('atomic criteria')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current program-manager.md",
        "Decomposition policy requirements"
      ],
      "outputs": [
        "Updated agent guide with policy reference"
      ],
      "constraints": [
        "Add to responsibilities section",
        "Reference atomic criteria enforcement",
        "Keep tone consistent with existing content",
        "No structural changes"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 19,
          "lines_end": 31
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:02:30.588Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-003",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update process-specialist.md with decomposition audit",
      "description": "Add decomposition audit to process specialist capabilities, reference audit_decomposition.cjs",
      "files_touched": [
        ".claude/agents/process-specialist.md"
      ],
      "est_lines_changed": 20,
      "est_local_effort_mins": 18,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/agents/process-specialist.md', 'utf-8'); if (!content.includes('decomposition audit') || !content.includes('audit_decomposition.cjs')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current process-specialist.md",
        "audit_decomposition.cjs functionality"
      ],
      "outputs": [
        "Updated agent guide with audit capabilities"
      ],
      "constraints": [
        "Add decomposition audit to analysis capabilities",
        "Reference scripts/audit_decomposition.cjs",
        "Mention atomicity_report.json output",
        "Preserve existing structure"
      ],
      "needs_context": [
        {
          "path": "scripts/audit_decomposition.cjs",
          "lines_start": 1,
          "lines_end": 50
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:02:30.639Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-004",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update cto-decompose.md command to use ///LOCAL_TASKS format",
      "description": "Update output format section to specify ///LOCAL_TASKS JSON format instead of old task spec",
      "files_touched": [
        ".claude/commands/cto-decompose.md"
      ],
      "est_lines_changed": 25,
      "est_local_effort_mins": 20,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/commands/cto-decompose.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS') || content.includes('task-spec.schema.json')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current cto-decompose.md",
        "///LOCAL_TASKS format specification"
      ],
      "outputs": [
        "Updated command with new output format"
      ],
      "constraints": [
        "Replace task spec references with ///LOCAL_TASKS",
        "Include atomic criteria table",
        "Update example output to use new format",
        "Reference .claude/schemas/local-task.schema.json"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 34,
          "lines_end": 68
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:02:30.693Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-005",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update local.md to reference new protocol",
      "description": "Replace old task spec workflow with ///LOCAL_TASKS format and dispatcher.cjs references",
      "files_touched": [
        ".claude/commands/local.md"
      ],
      "est_lines_changed": 40,
      "est_local_effort_mins": 25,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/commands/local.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS') || !content.includes('dispatcher.cjs')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current local.md",
        "New dispatcher workflow"
      ],
      "outputs": [
        "Updated command with new workflow"
      ],
      "constraints": [
        "Replace auto-generate-task-spec.sh references with dispatcher.cjs",
        "Update workflow to: decompose â†’ dispatcher add â†’ dispatcher assign-next",
        "Keep metrics section intact",
        "Update examples to use ///LOCAL_TASKS format"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 71,
          "lines_end": 85
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:04:18.492Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-006",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update local-code.md with ///LOCAL_TASKS format",
      "description": "Update examples and workflow to use ///LOCAL_TASKS JSON format",
      "files_touched": [
        ".claude/commands/local-code.md"
      ],
      "est_lines_changed": 30,
      "est_local_effort_mins": 20,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/commands/local-code.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current local-code.md",
        "///LOCAL_TASKS examples"
      ],
      "outputs": [
        "Updated command with new format"
      ],
      "constraints": [
        "Update all examples to show ///LOCAL_TASKS format",
        "Reference dispatcher.cjs for task execution",
        "Preserve DeepSeek-specific guidance",
        "Keep usage examples practical"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 38,
          "lines_end": 65
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:04:18.563Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-007",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update local-refactor.md with ///LOCAL_TASKS format",
      "description": "Update refactoring task examples to use ///LOCAL_TASKS JSON format",
      "files_touched": [
        ".claude/commands/local-refactor.md"
      ],
      "est_lines_changed": 28,
      "est_local_effort_mins": 18,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/commands/local-refactor.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current local-refactor.md",
        "Refactoring task patterns"
      ],
      "outputs": [
        "Updated command with new format"
      ],
      "constraints": [
        "Update examples to ///LOCAL_TASKS format",
        "Show needs_context usage for refactoring",
        "Preserve Qwen-specific guidance",
        "Keep refactoring best practices section"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 87,
          "lines_end": 120
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:04:18.632Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-008",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update local-test.md with ///LOCAL_TASKS format",
      "description": "Update test generation examples to use ///LOCAL_TASKS JSON format with invariant_test protocol",
      "files_touched": [
        ".claude/commands/local-test.md"
      ],
      "est_lines_changed": 35,
      "est_local_effort_mins": 22,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/commands/local-test.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS') || !content.includes('invariant_test')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current local-test.md",
        "invariant_test protocol"
      ],
      "outputs": [
        "Updated command with new format and protocol"
      ],
      "constraints": [
        "Update examples to ///LOCAL_TASKS format",
        "Add invariant_test protocol explanation",
        "Show automatic test task creation",
        "Reference invariant-test-generator.cjs"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 122,
          "lines_end": 155
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:04:18.695Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-009",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update local-doc.md with ///LOCAL_TASKS format",
      "description": "Update documentation task examples to use ///LOCAL_TASKS JSON format",
      "files_touched": [
        ".claude/commands/local-doc.md"
      ],
      "est_lines_changed": 25,
      "est_local_effort_mins": 18,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/commands/local-doc.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current local-doc.md",
        "Documentation task patterns"
      ],
      "outputs": [
        "Updated command with new format"
      ],
      "constraints": [
        "Update examples to ///LOCAL_TASKS format",
        "Preserve Qwen-specific documentation guidance",
        "Show needs_context for API reference tasks",
        "Keep JSDoc best practices"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 34,
          "lines_end": 68
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:04:18.753Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-010",
      "parent_id": "decomposition-policy-phase8",
      "title": "Rewrite LOCAL_MODELS_GUIDE.md for new protocol",
      "description": "Comprehensive rewrite to document ///LOCAL_TASKS format, dispatcher CLI, atomic criteria, and all protocols",
      "files_touched": [
        ".claude/LOCAL_MODELS_GUIDE.md"
      ],
      "est_lines_changed": 200,
      "est_local_effort_mins": 45,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/LOCAL_MODELS_GUIDE.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS') || !content.includes('dispatcher.cjs') || !content.includes('atomic criteria')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "DECOMPOSITION_POLICY.md",
        "All protocols",
        "Dispatcher CLI commands"
      ],
      "outputs": [
        "Completely rewritten guide"
      ],
      "constraints": [
        "Replace old task-spec workflow completely",
        "Document all dispatcher.cjs commands",
        "Include atomic criteria table",
        "Document needs_context, invariant_test, permission protocols",
        "Add troubleshooting section",
        "Include workflow diagrams",
        "Max 250 lines total"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 1,
          "lines_end": 212
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:06:15.835Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-011",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update AGENT_GUIDE.md with decomposition reference",
      "description": "Add section on decomposition policy enforcement for all agents",
      "files_touched": [
        ".claude/AGENT_GUIDE.md"
      ],
      "est_lines_changed": 20,
      "est_local_effort_mins": 15,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/AGENT_GUIDE.md', 'utf-8'); if (!content.includes('DECOMPOSITION_POLICY')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current AGENT_GUIDE.md",
        "Decomposition requirements for agents"
      ],
      "outputs": [
        "Updated guide with policy section"
      ],
      "constraints": [
        "Add decomposition policy section",
        "Reference atomic criteria requirement",
        "Add note about permission escalation",
        "Preserve existing agent documentation structure"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 1,
          "lines_end": 31
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:06:51.630Z",
      "tests_passed": true
    },
    {
      "id": "T-001",
      "parent_id": "0.002.1212-local-model-enforcement",
      "title": "Create pre-write blocking hook",
      "description": "Create PreToolUse hook that blocks Edit/Write/NotebookEdit when file is assigned to local model in active project. This hook runs BEFORE the tool executes (unlike delegation-check.cjs which is PostToolUse) and can block the operation by exiting with code 1.",
      "files_touched": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "est_lines_changed": 200,
      "est_local_effort_mins": 30,
      "test_command": "node .claude/hooks/pre-write-delegation-check.cjs < test-input.json",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "tool_input.file_path from stdin JSON"
      ],
      "outputs": [
        "Exit 0 (allow) or Exit 1 (block)"
      ],
      "constraints": [
        "#!/usr/bin/env node shebang",
        "Hook Type: PreToolUse (runs BEFORE tool executes)",
        "Read stdin as JSON containing tool_input",
        "Exit 0 to allow, Exit 1 to block",
        "Must be fast (<100ms)",
        "Include JSDoc header"
      ],
      "needs_context": [
        {
          "path": ".claude/hooks/delegation-check.cjs",
          "lines_start": 1,
          "lines_end": 191
        }
      ],
      "invariant_test": null,
      "assigned_at": "2025-12-12T08:17:47.903Z",
      "completed_at": "2025-12-12T08:26:42.392Z",
      "tests_passed": true
    },
    {
      "id": "T-TEST-001",
      "parent_id": "local-model-enforcement",
      "title": "Create test output file",
      "description": "Create a simple test file to verify dispatcher creates files correctly",
      "files_touched": [
        "test-dispatcher-output.js"
      ],
      "est_lines_changed": 10,
      "est_local_effort_mins": 5,
      "test_command": "node test-dispatcher-output.js",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "abandoned",
      "abandoned_reason": "Debugging task, no longer needed",
      "inputs": [],
      "outputs": [
        "Prints 'Dispatcher test successful!'"
      ],
      "constraints": [
        "Create a simple Node.js script",
        "Must export a function that returns 'Dispatcher test successful!'",
        "Include console.log statement",
        "File should be ~10 lines"
      ],
      "needs_context": [],
      "invariant_test": null,
      "assigned_at": "2025-12-12T15:58:33.355Z"
    },
    {
      "id": "T-ENF-001",
      "parent_id": null,
      "title": "Create pre-write blocking hook",
      "description": "Create PreToolUse hook that blocks Edit/Write when file assigned to local model. Read stdin as JSON, check if file is assigned to local model, exit 0 to allow or exit 1 to block.",
      "files_touched": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "est_lines_changed": 200,
      "est_local_effort_mins": 30,
      "test_command": "echo '{\"tool_input\":{\"file_path\":\"test.js\"}}' | node .claude/hooks/pre-write-delegation-check.cjs",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "abandoned",
      "abandoned_reason": "Duplicate of T-001 which is complete",
      "inputs": [
        ".claude/hooks/delegation-check.cjs"
      ],
      "outputs": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "constraints": [
        "#!/usr/bin/env node shebang",
        "Hook Type: PreToolUse (runs BEFORE tool executes)",
        "Read stdin as JSON containing tool_input",
        "Exit 0 to allow, Exit 1 to block",
        "Must be fast (<100ms)",
        "Include JSDoc header"
      ],
      "assigned_at": "2025-12-12T16:21:11.354Z"
    },
    {
      "id": "T-ENF-002",
      "parent_id": "T-ENF-001",
      "title": "Add active project check logic",
      "description": "Add function getActiveProjectContent() to check if active project exists by reading .claude/projects.json and returning project file path and content, or null if no active project.",
      "files_touched": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "est_lines_changed": 40,
      "est_local_effort_mins": 15,
      "test_command": "node .claude/hooks/__tests__/pre-write-delegation-check.test.js",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "abandoned",
      "abandoned_reason": "Parent T-ENF-001 abandoned - duplicate work",
      "inputs": [
        ".claude/hooks/delegation-check.cjs",
        ".claude/projects.json"
      ],
      "outputs": [
        "getActiveProjectContent() function"
      ],
      "constraints": [
        "Read .claude/projects.json to get active project",
        "If no active project, return null",
        "Read active project file content",
        "Handle file not found gracefully",
        "Function name: getActiveProjectContent()",
        "Return: {projectFile: string, content: string} or null"
      ],
      "assigned_at": "2025-12-12T16:27:03.980Z"
    },
    {
      "id": "T-ENF-003",
      "parent_id": "T-ENF-001",
      "title": "Add file-to-task matching logic",
      "description": "Add function isFileAssignedToLocalModel(projectContent, filePath) to parse project markdown tables and check if file basename is assigned to deepseek, qwen, or local:* model.",
      "files_touched": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "est_lines_changed": 60,
      "est_local_effort_mins": 20,
      "test_command": "node .claude/hooks/__tests__/pre-write-delegation-check.test.js",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "abandoned",
      "abandoned_reason": "Parent T-ENF-001 abandoned - duplicate work",
      "inputs": [
        ".claude/hooks/delegation-check.cjs"
      ],
      "outputs": [
        "isFileAssignedToLocalModel() function"
      ],
      "constraints": [
        "Parse project content for task tables",
        "Look for | Task | ... | Model | Status | format",
        "Check if file basename matches task file",
        "Check if Model column contains 'deepseek' or 'qwen' or 'local:'",
        "Function name: isFileAssignedToLocalModel(projectContent, filePath)",
        "Return: {assigned: boolean, taskId: string|null, model: string|null}"
      ],
      "assigned_at": "2025-12-12T16:27:51.830Z"
    },
    {
      "id": "T-ENF-004",
      "parent_id": "T-ENF-001",
      "title": "Add blocking exit logic",
      "description": "Add main execution logic that reads stdin JSON, calls getActiveProjectContent() and isFileAssignedToLocalModel(), then exits 1 to block if assigned to local model, or exits 0 to allow otherwise.",
      "files_touched": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "est_lines_changed": 50,
      "est_local_effort_mins": 15,
      "test_command": "node .claude/hooks/__tests__/pre-write-delegation-check.test.js",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "abandoned",
      "abandoned_reason": "Parent T-ENF-001 abandoned - duplicate work",
      "inputs": [],
      "outputs": [
        "Main execution flow"
      ],
      "constraints": [
        "Read stdin JSON to get tool_input.file_path",
        "Call getActiveProjectContent()",
        "If no project, exit 0 (allow)",
        "Call isFileAssignedToLocalModel()",
        "If assigned to local model, print error and exit 1 (block)",
        "If not assigned, exit 0 (allow)",
        "Handle all errors gracefully (exit 0 on error)"
      ],
      "assigned_at": "2025-12-12T16:54:46.563Z"
    },
    {
      "id": "T-ENF-005",
      "parent_id": "T-ENF-001",
      "title": "Create helpful error message",
      "description": "Add formatted error message function that displays box-formatted message with file name, task ID, assigned model, dispatcher commands, and policy reference when blocking occurs.",
      "files_touched": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "est_lines_changed": 30,
      "est_local_effort_mins": 10,
      "test_command": "echo '{\"tool_input\":{\"file_path\":\"test.js\"}}' | node .claude/hooks/pre-write-delegation-check.cjs 2>&1 | grep 'ðŸš«'",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "abandoned",
      "abandoned_reason": "Parent T-ENF-001 abandoned - duplicate work",
      "inputs": [
        ".claude/hooks/delegation-check.cjs"
      ],
      "outputs": [
        "Error message formatting function"
      ],
      "constraints": [
        "Box format with borders (like delegation-check.cjs lines 163-179)",
        "Include: file name, task ID, assigned model",
        "Show dispatcher commands to use instead",
        "Reference DECOMPOSITION_POLICY.md Section 10",
        "Error icon: ðŸš«",
        "Keep under 15 lines tall"
      ],
      "assigned_at": "2025-12-12T16:55:37.646Z"
    },
    {
      "id": "T-ENF-006",
      "parent_id": "T-ENF-001",
      "title": "Register hooks in settings",
      "description": "Add PreToolUse hook registrations for Edit, Write, and NotebookEdit tools in .vscode/settings.json pointing to .claude/hooks/pre-write-delegation-check.cjs",
      "files_touched": [
        ".vscode/settings.json"
      ],
      "est_lines_changed": 10,
      "est_local_effort_mins": 5,
      "test_command": "node -e \"JSON.parse(require('fs').readFileSync('.vscode/settings.json'))\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "abandoned",
      "abandoned_reason": "Parent T-ENF-001 abandoned - duplicate work",
      "inputs": [
        ".vscode/settings.json"
      ],
      "outputs": [
        "Updated settings.json with hook registrations"
      ],
      "constraints": [
        "Add to hooks object",
        "Register for: PreToolUse:Edit, PreToolUse:Write, PreToolUse:NotebookEdit",
        "Path: .claude/hooks/pre-write-delegation-check.cjs",
        "Maintain JSON formatting",
        "Don't duplicate if already exists"
      ],
      "assigned_at": "2025-12-12T16:56:10.542Z"
    },
    {
      "id": "T-ENF-007",
      "parent_id": "T-ENF-001",
      "title": "Write tests for blocking hook",
      "description": "Write unit tests using node:test for pre-write blocking hook covering: no active project allows, file not in project allows, file assigned to local model blocks, file assigned to claude allows, error handling allows.",
      "files_touched": [
        ".claude/hooks/__tests__/pre-write-delegation-check.test.js"
      ],
      "est_lines_changed": 150,
      "est_local_effort_mins": 30,
      "test_command": "node .claude/hooks/__tests__/pre-write-delegation-check.test.js",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "abandoned",
      "abandoned_reason": "Parent T-ENF-001 abandoned - T-007 has same functionality",
      "inputs": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "outputs": [
        ".claude/hooks/__tests__/pre-write-delegation-check.test.js"
      ],
      "constraints": [
        "Use node:test (built-in test runner)",
        "Test: No active project â†’ allows (exit 0)",
        "Test: File not in project â†’ allows",
        "Test: File assigned to local model â†’ blocks (exit 1)",
        "Test: File assigned to claude â†’ allows",
        "Test: Error handling â†’ allows (fail open)",
        "Mock file reads and stdin"
      ],
      "assigned_at": "2025-12-12T16:56:18.012Z"
    },
    {
      "id": "T-ENF-008",
      "parent_id": null,
      "title": "Reword backlog escape hatch note",
      "description": "In BACKLOG.md, replace the note that mentions 'outputs code without creating files' with policy-reinforcing text that instructs to fix the underlying dispatcher issue via recursive decomposition rather than bypassing delegation.",
      "files_touched": [
        ".claude/BACKLOG.md"
      ],
      "est_lines_changed": 5,
      "est_local_effort_mins": 5,
      "test_command": "grep -q 'dispatcher integration bug' .claude/BACKLOG.md",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "in_progress",
      "inputs": [
        ".claude/BACKLOG.md"
      ],
      "outputs": [
        "Updated .claude/BACKLOG.md with policy-reinforcing note"
      ],
      "constraints": [
        "Find and replace note starting with '*Note: Local model delegation attempted...'",
        "Replace with: '*Note: If local model outputs code without creating files, this indicates a dispatcher integration bug that must be fixed per DECOMPOSITION_POLICY.md Section 9 (recursive decomposition). Do NOT bypass delegation - troubleshoot and fix the underlying issue.'",
        "Maintain markdown formatting",
        "Keep in same location (around line 70)"
      ],
      "assigned_at": "2025-12-12T16:56:36.102Z"
    },
    {
      "id": "T-017-combined",
      "title": "Create auto-execute-project.cjs with spec extraction and dispatcher integration",
      "description": "Create CLI script that reads project files, extracts task specs from <details> sections, converts to ///LOCAL_TASKS format, and pipes to dispatcher for execution",
      "files_touched": [
        "scripts/auto-execute-project.cjs"
      ],
      "est_lines_changed": 290,
      "est_local_effort_mins": 45,
      "test_command": "node scripts/auto-execute-project.cjs --help",
      "assigned_to": "local:deepseek",
      "priority": "P1",
      "status": "in_progress",
      "inputs": [
        "project name as CLI argument"
      ],
      "outputs": [
        "Executes all tasks from project file via dispatcher"
      ],
      "constraints": [
        "#!/usr/bin/env node shebang",
        "Accept project name as argument",
        "Find project file in docs/projects/",
        "Parse markdown <details> sections for ```json blocks",
        "Validate extracted JSON against local-task schema",
        "Convert to ///LOCAL_TASKS format",
        "Pipe to dispatcher.cjs add-tasks via child_process",
        "Call dispatcher.cjs assign-next for each task",
        "Report progress to console",
        "Handle errors gracefully"
      ],
      "needs_context": [
        {
          "path": "scripts/dispatcher.cjs",
          "lines_start": 111,
          "lines_end": 170
        },
        {
          "path": "scripts/dispatcher.cjs",
          "lines_start": 201,
          "lines_end": 303
        },
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 35,
          "lines_end": 68
        }
      ],
      "assigned_at": "2025-12-12T16:58:00.075Z"
    },
    {
      "id": "T-020",
      "title": "Create DISPATCHER_QUICKSTART.md guide",
      "description": "Create quickstart guide with copy-paste commands for common dispatcher workflows",
      "files_touched": [
        ".claude/DISPATCHER_QUICKSTART.md"
      ],
      "est_lines_changed": 200,
      "est_local_effort_mins": 30,
      "test_command": "test -f .claude/DISPATCHER_QUICKSTART.md",
      "assigned_to": "local:qwen",
      "priority": "P1",
      "status": "abandoned",
      "abandoned_reason": "Superseded by T-020-FIX",
      "inputs": [
        "existing dispatcher.cjs commands"
      ],
      "outputs": [
        "Markdown quickstart guide"
      ],
      "constraints": [
        "Include copy-paste commands for: adding tasks manually, auto-executing project, checking status, troubleshooting",
        "Section: Adding tasks manually",
        "Section: Auto-executing project (use T-017 script)",
        "Section: Checking status",
        "Section: Troubleshooting common errors",
        "Include examples from this enforcement project",
        "Keep under 200 lines",
        "Use code blocks for all commands"
      ],
      "needs_context": [
        {
          "path": "scripts/dispatcher.cjs",
          "lines_start": 1,
          "lines_end": 50
        },
        {
          "path": "docs/projects/0.002.1212-local-model-enforcement.project.md",
          "lines_start": 130,
          "lines_end": 300
        }
      ],
      "assigned_at": "2025-12-12T16:58:43.011Z"
    },
    {
      "id": "T-007",
      "title": "Write unit tests for pre-write-delegation-check.cjs",
      "description": "Write unit tests for pre-write blocking hook using node:test",
      "files_touched": [
        ".claude/hooks/__tests__/pre-write-delegation-check.test.js"
      ],
      "est_lines_changed": 150,
      "est_local_effort_mins": 40,
      "test_command": "node .claude/hooks/__tests__/pre-write-delegation-check.test.js",
      "assigned_to": "local:qwen",
      "priority": "P1",
      "status": "in_progress",
      "inputs": [
        "pre-write-delegation-check.cjs or delegation-check-pre.cjs"
      ],
      "outputs": [
        "Unit test file with 5+ test cases"
      ],
      "constraints": [
        "Use node:test (built-in test runner)",
        "Test: No active project â†’ allows (exit 0)",
        "Test: File not in project â†’ allows",
        "Test: File assigned to local model â†’ blocks (exit 2)",
        "Test: File assigned to claude â†’ allows",
        "Test: Error handling â†’ allows (fail open)",
        "Mock file reads and stdin using node:test mocking",
        "Target file: .claude/hooks/delegation-check-pre.cjs (the complete version)"
      ],
      "needs_context": [
        {
          "path": ".claude/hooks/delegation-check-pre.cjs",
          "lines_start": 1,
          "lines_end": 316
        }
      ],
      "assigned_at": "2025-12-12T16:59:06.236Z"
    },
    {
      "id": "T-020-FIX",
      "title": "Rewrite DISPATCHER_QUICKSTART.md in proper markdown format",
      "description": "Replace the incorrectly generated JavaScript code with proper markdown documentation showing dispatcher workflow commands",
      "files_touched": [
        ".claude/DISPATCHER_QUICKSTART.md"
      ],
      "est_lines_changed": 180,
      "est_local_effort_mins": 25,
      "test_command": "grep -q '## Adding Tasks Manually' .claude/DISPATCHER_QUICKSTART.md",
      "assigned_to": "local:qwen",
      "priority": "P1",
      "status": "in_progress",
      "inputs": [
        "dispatcher.cjs commands",
        "enforcement project examples"
      ],
      "outputs": [
        "Markdown quickstart guide with sections and code blocks"
      ],
      "constraints": [
        "Pure markdown format (NOT JavaScript)",
        "Section 1: Adding tasks manually - show cat tasks.json | node scripts/dispatcher.cjs add-tasks",
        "Section 2: Executing tasks - show node scripts/dispatcher.cjs assign-next",
        "Section 3: Checking status - show node scripts/dispatcher.cjs status",
        "Section 4: Troubleshooting - common errors and fixes",
        "Include examples from local-model-enforcement project",
        "Use markdown code blocks with bash syntax highlighting",
        "Keep under 200 lines"
      ],
      "needs_context": [
        {
          "path": "scripts/dispatcher.cjs",
          "lines_start": 1,
          "lines_end": 60
        },
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 449,
          "lines_end": 463
        }
      ],
      "assigned_at": "2025-12-12T17:05:53.102Z"
    },
    {
      "id": "T-017-FIX",
      "title": "Fix auto-execute-project.cjs bugs and simplify implementation",
      "description": "Rewrite auto-execute-project.cjs without external dependencies (showdown/ajv), fix syntax errors, and implement proper task extraction from project files",
      "files_touched": [
        "scripts/auto-execute-project.cjs"
      ],
      "est_lines_changed": 150,
      "est_local_effort_mins": 40,
      "test_command": "node scripts/auto-execute-project.cjs --help",
      "assigned_to": "local:deepseek",
      "priority": "P1",
      "status": "in_progress",
      "inputs": [
        "Project markdown files with <details> sections"
      ],
      "outputs": [
        "Working CLI script that extracts and executes tasks"
      ],
      "constraints": [
        "NO external dependencies (remove showdown, ajv)",
        "Use Node.js built-in modules only (fs, path, child_process)",
        "Parse markdown using regex to find <details> sections",
        "Extract JSON from code blocks: ```json ... ```",
        "Use JSON.parse to validate (no ajv needed)",
        "Fix path resolution (use process.cwd() + 'docs/projects/')",
        "Add proper error handling",
        "Include --help flag showing usage",
        "Pipe to dispatcher via spawn/exec with proper stdin",
        "Test with: node scripts/auto-execute-project.cjs --help"
      ],
      "needs_context": [
        {
          "path": "scripts/dispatcher.cjs",
          "lines_start": 111,
          "lines_end": 170
        },
        {
          "path": "docs/projects/0.002.1212-local-model-enforcement.project.md",
          "lines_start": 130,
          "lines_end": 160
        }
      ],
      "assigned_at": "2025-12-12T17:06:11.226Z"
    },
    {
      "id": "T-DECOMP-001",
      "title": "Add Task Complexity Classification to DECOMPOSITION_POLICY.md",
      "description": "Add Section 2.5 defining Type A-D task complexity with guidelines for each type",
      "files_touched": [
        ".claude/DECOMPOSITION_POLICY.md"
      ],
      "est_lines_changed": 80,
      "est_local_effort_mins": 25,
      "test_command": "grep -q 'Type A: Mechanical Edit' .claude/DECOMPOSITION_POLICY.md",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "in_progress",
      "constraints": [
        "Insert new Section 2.5 after Section 2 (Atomic Criteria)",
        "Define 4 complexity types: Type A (Mechanical Edit), Type B (Template Fill), Type C (Creative Generation), Type D (Semantic Rewrite)",
        "For each type: describe characteristics, provide examples, specify when to use",
        "Add rule: Only Type A/B can be assigned to local models without escalation",
        "Keep formatting consistent with existing sections",
        "Use markdown headers, bullet points, and code examples"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 57,
          "lines_end": 90
        }
      ],
      "assigned_at": "2025-12-12T17:49:30.679Z"
    },
    {
      "id": "T-DECOMP-002",
      "title": "Extend local-task.schema.json with new optional fields",
      "description": "Add edit_strategy, edit_operations, output_template, anti_patterns to task schema",
      "files_touched": [
        ".claude/schemas/local-task.schema.json"
      ],
      "est_lines_changed": 120,
      "est_local_effort_mins": 35,
      "test_command": "node -e \"const s=require('./.claude/schemas/local-task.schema.json'); if(!s.properties.edit_strategy) process.exit(1);\"",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "in_progress",
      "constraints": [
        "Add to properties object (not required array):",
        "  edit_strategy: {type: string, enum: [incremental_edit, template_fill, create_new, rewrite]}",
        "  edit_operations: {type: array, items: {type: object, properties: {type, line, content}}}",
        "  output_template: {type: string}",
        "  anti_patterns: {type: array, items: {type: string}}",
        "All new fields are OPTIONAL",
        "Maintain valid JSON syntax",
        "Keep existing fields unchanged"
      ],
      "needs_context": [
        {
          "path": ".claude/schemas/local-task.schema.json",
          "lines_start": 1,
          "lines_end": 100
        }
      ],
      "assigned_at": "2025-12-12T17:50:06.601Z"
    },
    {
      "id": "T-DECOMP-003",
      "title": "Add escalation checklist to permission-request.schema.json",
      "description": "Add REQUIRED decomposition_quality_checklist field with validation questions",
      "files_touched": [
        ".claude/schemas/permission-request.schema.json"
      ],
      "est_lines_changed": 60,
      "est_local_effort_mins": 20,
      "test_command": "node -e \"const s=require('./.claude/schemas/permission-request.schema.json'); if(!s.properties.decomposition_quality_checklist) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "in_progress",
      "constraints": [
        "Add decomposition_quality_checklist to properties",
        "Make it type: object with properties:",
        "  - task_complexity_type: {enum: [A, B, C, D], required: true}",
        "  - why_not_type_a: {type: string}",
        "  - decomposition_attempts: {type: number, minimum: 2}",
        "  - alternative_decompositions: {type: array}",
        "  - why_local_model_cannot: {type: string, minLength: 100}",
        "  - tokens_at_stake: {type: number}",
        "Add decomposition_quality_checklist to required array",
        "Maintain valid JSON schema syntax"
      ],
      "needs_context": [
        {
          "path": ".claude/schemas/permission-request.schema.json",
          "lines_start": 1,
          "lines_end": 80
        }
      ],
      "assigned_at": "2025-12-12T17:50:26.026Z"
    },
    {
      "id": "T-DECOMP-004",
      "title": "Create ESCALATION_LOG.md with structured template",
      "description": "Create new markdown file for logging all escalation decisions",
      "files_touched": [
        ".claude/ESCALATION_LOG.md"
      ],
      "est_lines_changed": 100,
      "est_local_effort_mins": 20,
      "test_command": "test -f .claude/ESCALATION_LOG.md && grep -q '## Log Format' .claude/ESCALATION_LOG.md",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "in_progress",
      "constraints": [
        "Create file with title: # Escalation Log",
        "Add purpose statement explaining what this tracks",
        "Include ## Log Format section with template entry format",
        "Include ## Entries section (empty initially)",
        "Include ## Statistics section with counters (all zero initially)",
        "Use markdown formatting throughout",
        "Template should show: Date, Task ID, Complexity Type, Reason, Tokens, Decision, Outcome",
        "Keep under 150 lines for initial template"
      ],
      "assigned_at": "2025-12-12T17:50:55.883Z"
    },
    {
      "id": "T-LEARN-001",
      "parent_id": "learning-dashboard-phase1",
      "title": "Create logging directory structure",
      "description": "Create .claude/logs/ directory with .gitkeep and README explaining log format",
      "files_touched": [
        ".claude/logs/.gitkeep",
        ".claude/logs/README.md"
      ],
      "est_lines_changed": 30,
      "est_local_effort_mins": 15,
      "test_command": "test -d .claude/logs && test -f .claude/logs/.gitkeep && test -f .claude/logs/README.md",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "None"
      ],
      "outputs": [
        ".claude/logs/ directory with .gitkeep and README.md"
      ],
      "constraints": [
        "README explains JSONL log format",
        ".gitkeep ensures directory tracked",
        "Add *.log to .gitignore"
      ],
      "task_complexity_type": "A",
      "assigned_at": "2025-12-12T19:22:42.697Z",
      "completed_at": "2025-12-12T19:27:04.982Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-002",
      "parent_id": "learning-dashboard-phase1",
      "title": "Create task execution log schema",
      "description": "Define JSONL schema for local-model-tasks.log entries with all fields from proposal",
      "files_touched": [
        ".claude/schemas/task-execution-log.schema.json"
      ],
      "est_lines_changed": 150,
      "est_local_effort_mins": 25,
      "test_command": "node -e \"const s = require('./.claude/schemas/task-execution-log.schema.json'); if (!s.properties.failure_classification) process.exit(1);\"",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "done",
      "inputs": [
        ".claude/schemas/local-task.schema.json for reference"
      ],
      "outputs": [
        "Complete JSON schema for task execution log entries"
      ],
      "constraints": [
        "Include timestamp, task_id, model, status, execution, test_result, failure_classification",
        "Use JSON Schema format",
        "Document each field"
      ],
      "task_complexity_type": "B",
      "needs_context": [
        {
          "path": ".claude/schemas/local-task.schema.json",
          "lines_start": 1,
          "lines_end": 100
        }
      ],
      "assigned_at": "2025-12-12T19:23:22.010Z",
      "completed_at": "2025-12-12T19:27:05.032Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-003",
      "parent_id": "learning-dashboard-phase1",
      "title": "Add logging functions to dispatcher",
      "description": "Add writeTaskLog() function to dispatcher.cjs that appends JSONL entries",
      "files_touched": [
        "scripts/dispatcher.cjs"
      ],
      "est_lines_changed": 40,
      "est_local_effort_mins": 30,
      "test_command": "node -e \"require('./scripts/dispatcher.cjs'); console.log('ok')\"",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Existing dispatcher.cjs structure"
      ],
      "outputs": [
        "writeTaskLog(entry) function that appends to .claude/logs/local-model-tasks.log"
      ],
      "constraints": [
        "Add LOG_FILE constant after line 26",
        "Add writeTaskLog after saveBacklog function",
        "Handle errors silently",
        "JSONL format (one JSON per line)"
      ],
      "task_complexity_type": "C",
      "needs_context": [
        {
          "path": "scripts/dispatcher.cjs",
          "lines_start": 1,
          "lines_end": 100
        }
      ],
      "assigned_at": "2025-12-12T19:23:56.424Z",
      "completed_at": "2025-12-12T19:27:05.081Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-004",
      "parent_id": "learning-dashboard-phase1",
      "title": "Log task start in assign-next command",
      "description": "Call writeTaskLog() when task execution starts",
      "files_touched": [
        "scripts/dispatcher.cjs"
      ],
      "est_lines_changed": 15,
      "est_local_effort_mins": 20,
      "test_command": "grep -q writeTaskLog scripts/dispatcher.cjs",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Existing assign-next command code"
      ],
      "outputs": [
        "Log entry with status=in_progress at task start"
      ],
      "constraints": [
        "Add after console.log calling local model",
        "Include timestamp, task_id, model, status, execution.start",
        "Use try-catch"
      ],
      "task_complexity_type": "A",
      "needs_context": [
        {
          "path": "scripts/dispatcher.cjs",
          "lines_start": 240,
          "lines_end": 280
        }
      ],
      "completed_at": "2025-12-12T19:27:05.133Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-005",
      "parent_id": "learning-dashboard-phase1",
      "title": "Log task completion in assign-next command",
      "description": "Call writeTaskLog() after task execution completes (success or failure)",
      "files_touched": [
        "scripts/dispatcher.cjs"
      ],
      "est_lines_changed": 30,
      "est_local_effort_mins": 25,
      "test_command": "grep -c writeTaskLog scripts/dispatcher.cjs",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Existing success/failure paths in assign-next"
      ],
      "outputs": [
        "Log entries in both success and failure paths with duration"
      ],
      "constraints": [
        "Add in both success and failure paths",
        "Calculate duration_ms from start",
        "Include execution.end and status"
      ],
      "task_complexity_type": "A",
      "needs_context": [
        {
          "path": "scripts/dispatcher.cjs",
          "lines_start": 270,
          "lines_end": 300
        }
      ],
      "anti_patterns": [
        "Don't duplicate entire assign-next function",
        "Don't remove existing console.log statements"
      ],
      "completed_at": "2025-12-12T19:27:05.182Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-006",
      "parent_id": "learning-dashboard-phase1",
      "title": "Create test result parser utility",
      "description": "Create utility to parse test output and extract detailed failure info",
      "files_touched": [
        "scripts/utils/test-result-parser.cjs"
      ],
      "est_lines_changed": 100,
      "est_local_effort_mins": 40,
      "test_command": "node -e \"const p = require('./scripts/utils/test-result-parser.cjs'); console.log('ok')\"",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "vitest output format examples",
        "npm test error format"
      ],
      "outputs": [
        "parseTestOutput(stdout, stderr, exitCode) function returning {tests_run, tests_passed, tests_failed, failure_summary, error_type}"
      ],
      "constraints": [
        "Handle vitest format",
        "Handle npm test errors",
        "Truncate error messages to 500 chars",
        "Return null for unparseable"
      ],
      "task_complexity_type": "C",
      "assigned_at": "2025-12-12T19:27:11.173Z",
      "completed_at": "2025-12-12T19:28:33.115Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-007",
      "parent_id": "learning-dashboard-phase1",
      "title": "Integrate test parser with complete command",
      "description": "Use test-result-parser in complete command to log detailed test results",
      "files_touched": [
        "scripts/dispatcher.cjs"
      ],
      "est_lines_changed": 20,
      "est_local_effort_mins": 20,
      "test_command": "grep -q parseTestOutput scripts/dispatcher.cjs",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "blocked",
      "inputs": [
        "test-result-parser.cjs exports",
        "complete command code"
      ],
      "outputs": [
        "Parser integrated, test_result included in log entries"
      ],
      "constraints": [
        "Import at top of file",
        "Call in complete command",
        "Keep existing test pass/fail logic"
      ],
      "task_complexity_type": "A",
      "needs_context": [
        {
          "path": "scripts/dispatcher.cjs",
          "lines_start": 340,
          "lines_end": 370
        }
      ],
      "assigned_at": "2025-12-12T19:28:33.215Z",
      "completed_at": "2025-12-12T19:29:10.946Z",
      "tests_passed": false,
      "failure_count": 1,
      "decomposition_depth": 1,
      "needs_redecomposition": true,
      "redecompose_requested_at": "2025-12-12T19:29:10.949Z",
      "redecompose_reason": "Test failure (attempt 1)",
      "decomposition_history": [
        {
          "timestamp": "2025-12-12T19:29:10.949Z",
          "depth": 1,
          "reason": "Test failure (attempt 1)"
        }
      ]
    },
    {
      "id": "T-LEARN-008",
      "parent_id": "learning-dashboard-phase1",
      "title": "Create log viewer utility script",
      "description": "Create script to view/filter local-model-tasks.log in readable format",
      "files_touched": [
        "scripts/view-task-log.cjs"
      ],
      "est_lines_changed": 120,
      "est_local_effort_mins": 35,
      "test_command": "node scripts/view-task-log.cjs --help",
      "assigned_to": "local:deepseek",
      "priority": "P1",
      "status": "done",
      "inputs": [
        "JSONL log file format",
        "CLI argument parsing patterns"
      ],
      "outputs": [
        "CLI tool with --status, --task-id, --model, --last, --verbose filters"
      ],
      "constraints": [
        "Read .claude/logs/local-model-tasks.log",
        "Table format output",
        "Handle missing log gracefully"
      ],
      "task_complexity_type": "C",
      "assigned_at": "2025-12-12T19:29:10.999Z",
      "completed_at": "2025-12-12T19:30:19.599Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-009",
      "parent_id": "learning-dashboard-phase2",
      "title": "Create learning directory structure",
      "description": "Create .claude/learning/ directory with .gitkeep and README explaining failure patterns",
      "files_touched": [
        ".claude/learning/.gitkeep",
        ".claude/learning/README.md"
      ],
      "est_lines_changed": 25,
      "est_local_effort_mins": 15,
      "test_command": "test -d .claude/learning && test -f .claude/learning/README.md",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [],
      "outputs": [
        ".claude/learning/ directory with README"
      ],
      "constraints": [
        "README explains failure pattern schema and usage"
      ],
      "task_complexity_type": "A",
      "edit_strategy": "create_new",
      "assigned_at": "2025-12-12T19:35:00.009Z",
      "completed_at": "2025-12-12T19:36:32.640Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-010",
      "parent_id": "learning-dashboard-phase2",
      "title": "Create failure pattern schema",
      "description": "Define JSON schema for failure-patterns.json with pattern_id, name, occurrences, mitigation_status fields",
      "files_touched": [
        ".claude/schemas/failure-pattern.schema.json"
      ],
      "est_lines_changed": 120,
      "est_local_effort_mins": 30,
      "test_command": "node -e \"const s = require('./.claude/schemas/failure-pattern.schema.json'); if (!s.properties.mitigation_status) process.exit(1);\"",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "done",
      "inputs": [],
      "outputs": [
        "Complete JSON schema for failure patterns"
      ],
      "constraints": [
        "Include pattern_id, name, description, signature, occurrences array, mitigation_status, effectiveness_rate",
        "Use JSON Schema format"
      ],
      "task_complexity_type": "B",
      "edit_strategy": "create_new",
      "assigned_at": "2025-12-12T19:36:32.723Z",
      "completed_at": "2025-12-12T19:38:24.514Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-011",
      "parent_id": "learning-dashboard-phase2",
      "title": "Initialize failure-patterns.json with known patterns",
      "description": "Create failure-patterns.json with FP-001 (File Modification) and FP-002 (Constraint Ignoring) pre-populated",
      "files_touched": [
        ".claude/learning/failure-patterns.json"
      ],
      "est_lines_changed": 80,
      "est_local_effort_mins": 25,
      "test_command": "node -e \"const f = require('./.claude/learning/failure-patterns.json'); if (f.patterns.length < 2) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "FP-001: File Modification Anti-Pattern - local models rewrite entire file instead of editing, 4+ occurrences",
        "FP-002: Constraint Ignoring - models ignore explicit constraints like pure markdown producing JavaScript"
      ],
      "outputs": [
        "failure-patterns.json with 2 known patterns"
      ],
      "constraints": [
        "Include pattern_id, name, description, signature, occurrences, mitigation_status for each",
        "FP-001 mitigation_status should be implemented (size guard added)"
      ],
      "task_complexity_type": "B",
      "edit_strategy": "create_new",
      "completed_at": "2025-12-12T19:38:24.607Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-012",
      "parent_id": "learning-dashboard-phase2",
      "title": "Create pattern detection script",
      "description": "Script to detect if a new failure matches existing patterns based on error signatures",
      "files_touched": [
        "scripts/detect-failure-pattern.cjs"
      ],
      "est_lines_changed": 80,
      "est_local_effort_mins": 35,
      "test_command": "node -e \"require('./scripts/detect-failure-pattern.cjs'); console.log('ok')\"",
      "assigned_to": "local:deepseek",
      "priority": "P1",
      "status": "done",
      "inputs": [],
      "outputs": [
        "detectPattern(taskLog) function returning pattern_id or null"
      ],
      "constraints": [
        "Export detectPattern function",
        "Match on error messages and task complexity type",
        "Return null if no match"
      ],
      "task_complexity_type": "C",
      "edit_strategy": "create_new",
      "completed_at": "2025-12-12T19:38:24.690Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-015",
      "title": "Create dashboard generator script skeleton",
      "description": "Create generate-dashboard.cjs with data loading functions. Load all 8 data sources (backlog.json, task log, patterns, violations, etc.). Export loadDashboardData() function. Handle missing files gracefully. Return aggregated data object.",
      "assigned_to": "local:deepseek",
      "priority": "P1",
      "status": "in_progress",
      "task_complexity_type": "C",
      "edit_strategy": "create_new",
      "files_touched": [
        "scripts/generate-dashboard.cjs"
      ],
      "est_lines_changed": 150,
      "test_command": "node -e \"const g = require('./scripts/generate-dashboard.cjs'); console.log('Loads')\"",
      "constraints": [
        "Load these data sources: .claude/backlog.json, .claude/logs/local-model-tasks.log, .claude/learning/failure-patterns.json, .claude/.delegation-violations.json, .claude/metrics/delegation.json, .claude/projects.json",
        "Handle JSONL format for .log files (one JSON per line)",
        "Return default empty values if files don't exist",
        "Export loadDashboardData() and loadFile() functions"
      ],
      "output_template": "#!/usr/bin/env node\n\nconst fs = require('fs');\nconst path = require('path');\n\nconst DATA_SOURCES = {\n  backlog: '.claude/backlog.json',\n  taskLog: '.claude/logs/local-model-tasks.log',\n  patterns: '.claude/learning/failure-patterns.json',\n  violations: '.claude/.delegation-violations.json',\n  metrics: '.claude/metrics/delegation.json',\n  projects: '.claude/projects.json'\n};\n\nfunction loadFile(filepath, defaultValue) {\n  // TODO: implement file loading\n}\n\nfunction loadDashboardData() {\n  // TODO: load all data sources\n}\n\nmodule.exports = { loadDashboardData, loadFile, DATA_SOURCES };",
      "assigned_at": "2025-12-12T19:49:44.864Z"
    },
    {
      "id": "T-LEARN-016",
      "title": "Add metrics calculation to dashboard generator",
      "description": "Add calculateMetrics(data) function to generate-dashboard.cjs. Return: health_score (0-100), success_rate, delegation_compliance. Handle division by zero.",
      "assigned_to": "local:deepseek",
      "priority": "P1",
      "status": "in_progress",
      "task_complexity_type": "C",
      "edit_strategy": "incremental_edit",
      "files_touched": [
        "scripts/generate-dashboard.cjs"
      ],
      "est_lines_changed": 80,
      "test_command": "grep -q \"calculateMetrics\" scripts/generate-dashboard.cjs",
      "constraints": [
        "Add function before module.exports",
        "Health score formula: 40% success rate + 30% compliance + 20% pattern mitigation + 10% active work",
        "Handle division by zero with defaults",
        "Export calculateMetrics in module.exports"
      ],
      "assigned_at": "2025-12-12T19:50:13.070Z"
    },
    {
      "id": "T-LEARN-017",
      "title": "Add markdown generation to dashboard generator",
      "description": "Add generateMarkdown(data, metrics) function. Include sections: Executive Summary, Task Execution, Learning Engine, Projects, Compliance. Return markdown string.",
      "assigned_to": "local:qwen",
      "priority": "P1",
      "status": "in_progress",
      "task_complexity_type": "B",
      "edit_strategy": "incremental_edit",
      "files_touched": [
        "scripts/generate-dashboard.cjs"
      ],
      "est_lines_changed": 200,
      "test_command": "grep -q \"generateMarkdown\" scripts/generate-dashboard.cjs",
      "constraints": [
        "Add function before module.exports",
        "Include health score emoji: >=80 green, >=60 yellow, <60 red",
        "Include timestamp of generation",
        "Export generateMarkdown in module.exports"
      ],
      "assigned_at": "2025-12-12T19:50:36.618Z"
    },
    {
      "id": "T-LEARN-018",
      "title": "Add CLI interface to dashboard generator",
      "description": "Add CLI interface: Accept --output flag (default: .claude/DASHBOARD.md), Accept --verbose flag. Call loadData â†’ calculateMetrics â†’ generateMarkdown â†’ write file.",
      "assigned_to": "local:qwen",
      "priority": "P1",
      "status": "in_progress",
      "task_complexity_type": "A",
      "edit_strategy": "incremental_edit",
      "files_touched": [
        "scripts/generate-dashboard.cjs"
      ],
      "est_lines_changed": 40,
      "test_command": "node scripts/generate-dashboard.cjs --help 2>&1 | grep -q \"output\"",
      "constraints": [
        "Use process.argv for argument parsing",
        "Default output: .claude/DASHBOARD.md",
        "--help shows usage",
        "--verbose prints loaded data counts"
      ],
      "assigned_at": "2025-12-12T19:51:14.836Z"
    },
    {
      "id": "T-LEARN-020",
      "title": "Add dashboard to .gitignore",
      "description": "Add .claude/DASHBOARD.md to .gitignore with comment explaining it's auto-generated.",
      "assigned_to": "local:qwen",
      "priority": "P1",
      "status": "done",
      "task_complexity_type": "A",
      "edit_strategy": "incremental_edit",
      "files_touched": [
        ".gitignore"
      ],
      "est_lines_changed": 2,
      "test_command": "grep -q \"DASHBOARD.md\" .gitignore",
      "assigned_at": "2025-12-12T19:51:38.256Z",
      "error": "Command failed: bash \"C:\\Users\\chris\\OneDrive\\Desktop\\Claude-Poker-Tracker\\scripts\\execute-local-task.sh\" \"C:\\Users\\chris\\OneDrive\\Desktop\\Claude-Poker-Tracker\\.claude\\.temp-task-spec.json\"",
      "failed_at": "2025-12-12T19:51:41.040Z",
      "completed_at": "2025-12-12T19:52:04.008Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-021",
      "title": "Document dashboard usage in CLAUDE.md",
      "description": "Add '## System Health Dashboard' section after 'Local Model Delegation' section. Explain how to generate and view dashboard.",
      "assigned_to": "local:qwen",
      "priority": "P2",
      "status": "done",
      "task_complexity_type": "B",
      "edit_strategy": "incremental_edit",
      "files_touched": [
        "CLAUDE.md"
      ],
      "est_lines_changed": 30,
      "test_command": "grep -q \"System Health Dashboard\" CLAUDE.md",
      "constraints": [
        "Add after '---' divider following 'Local Model Delegation' section",
        "Include command: node scripts/generate-dashboard.cjs",
        "Explain that DASHBOARD.md is auto-generated"
      ],
      "assigned_at": "2025-12-12T19:52:09.974Z",
      "error": "Command failed: bash \"C:\\Users\\chris\\OneDrive\\Desktop\\Claude-Poker-Tracker\\scripts\\execute-local-task.sh\" \"C:\\Users\\chris\\OneDrive\\Desktop\\Claude-Poker-Tracker\\.claude\\.temp-task-spec.json\"",
      "failed_at": "2025-12-12T19:52:14.358Z",
      "completed_at": "2025-12-12T19:52:47.638Z",
      "tests_passed": true
    },
    {
      "id": "T-LEARN-022",
      "title": "Create failure classifier using LLM",
      "description": "Use local LLM to auto-classify failure types from error messages. Call local model with error message. Return classification: type_error, syntax_error, test_failure, constraint_violation, etc. Fallback to 'unknown' if uncertain. Include confidence score.",
      "assigned_to": "local:deepseek",
      "priority": "P2",
      "status": "in_progress",
      "task_complexity_type": "C",
      "edit_strategy": "create_new",
      "files_touched": [
        "scripts/classify-failure.cjs"
      ],
      "est_lines_changed": 100,
      "test_command": "node scripts/classify-failure.cjs --error \"TypeError: Cannot read property\" 2>&1 | grep -qi \"type\\|error\\|classification\"",
      "constraints": [
        "Accept --error flag with error message string",
        "Return JSON with: classification, confidence (0-1), reasoning",
        "Classifications: type_error, syntax_error, test_failure, constraint_violation, size_guard, unknown",
        "Use simple pattern matching (no actual LLM call for MVP)"
      ],
      "assigned_at": "2025-12-12T19:56:38.657Z"
    },
    {
      "id": "T-LEARN-023",
      "title": "Create auto-pattern proposer",
      "description": "Scan task log for failures, group by error signature. If 2+ similar failures without existing pattern, generate proposal for human review. Output to stdout, don't auto-add to failure-patterns.json.",
      "assigned_to": "local:deepseek",
      "priority": "P2",
      "status": "in_progress",
      "task_complexity_type": "C",
      "edit_strategy": "create_new",
      "files_touched": [
        "scripts/propose-pattern.cjs"
      ],
      "est_lines_changed": 120,
      "test_command": "node scripts/propose-pattern.cjs 2>&1 | grep -qi \"pattern\\|proposal\\|none\"",
      "constraints": [
        "Read .claude/logs/local-model-tasks.log",
        "Group failures by error message similarity",
        "Only propose if 2+ similar failures exist",
        "Output JSON pattern template matching failure-pattern.schema.json",
        "If no patterns to propose, output 'No new patterns detected'"
      ],
      "assigned_at": "2025-12-12T19:57:08.458Z"
    },
    {
      "id": "T-LEARN-024",
      "title": "Add post-task dashboard update hook",
      "description": "Create PostToolUse hook that regenerates dashboard after dispatcher complete command. Run generate-dashboard.cjs silently, don't block on errors.",
      "assigned_to": "local:qwen",
      "priority": "P2",
      "status": "in_progress",
      "task_complexity_type": "B",
      "edit_strategy": "create_new",
      "files_touched": [
        ".claude/hooks/dashboard-update.cjs"
      ],
      "est_lines_changed": 50,
      "test_command": "grep -q \"generate-dashboard\" .claude/hooks/dashboard-update.cjs",
      "constraints": [
        "Hook type: PostToolUse",
        "Match tool: Bash",
        "Match pattern: dispatcher.cjs complete",
        "Run: node scripts/generate-dashboard.cjs silently",
        "Don't block on errors - wrap in try/catch"
      ],
      "assigned_at": "2025-12-12T19:57:34.472Z"
    },
    {
      "id": "T-LEARN-025",
      "title": "Create /dashboard slash command",
      "description": "Add slash command that regenerates dashboard then displays it. Simple markdown file in .claude/commands/.",
      "assigned_to": "local:qwen",
      "priority": "P2",
      "status": "in_progress",
      "task_complexity_type": "A",
      "edit_strategy": "create_new",
      "files_touched": [
        ".claude/commands/dashboard.md"
      ],
      "est_lines_changed": 20,
      "test_command": "test -f .claude/commands/dashboard.md && grep -q \"generate-dashboard\" .claude/commands/dashboard.md",
      "constraints": [
        "First run: node scripts/generate-dashboard.cjs",
        "Then read and display: .claude/DASHBOARD.md",
        "Include brief description of what dashboard shows"
      ],
      "assigned_at": "2025-12-12T19:58:06.104Z"
    },
    {
      "id": "T-LEARN-026",
      "title": "Add dashboard to startup menu",
      "description": "Add '[7] View System Dashboard' option to startup-menu.cjs that triggers /dashboard command.",
      "assigned_to": "local:qwen",
      "priority": "P2",
      "status": "done",
      "task_complexity_type": "A",
      "edit_strategy": "incremental_edit",
      "files_touched": [
        ".claude/hooks/startup-menu.cjs"
      ],
      "est_lines_changed": 15,
      "test_command": "grep -q \"Dashboard\" .claude/hooks/startup-menu.cjs",
      "assigned_at": "2025-12-12T19:58:24.286Z",
      "error": "Command failed: bash \"C:\\Users\\chris\\OneDrive\\Desktop\\Claude-Poker-Tracker\\scripts\\execute-local-task.sh\" \"C:\\Users\\chris\\OneDrive\\Desktop\\Claude-Poker-Tracker\\.claude\\.temp-task-spec.json\"",
      "failed_at": "2025-12-12T19:58:33.139Z",
      "completed_at": "2025-12-12T19:59:47.515Z",
      "tests_passed": true
    }
  ],
  "projects": {
    "decomposition-policy": {
      "name": "Comprehensive Decomposition Policy Integration",
      "status": "active",
      "phase": 2,
      "total_phases": 10,
      "created_at": "2025-12-11T00:00:00Z",
      "file": "docs/projects/0.001.1211-decomposition-policy.project.md"
    },
    "primitive-actions-ui": {
      "name": "Primitive Actions UI",
      "status": "active",
      "phase": 1,
      "total_phases": 4,
      "created_at": "2025-12-11T00:00:00Z",
      "file": "docs/projects/1.001.1211-primitive-actions-ui.project.md"
    }
  },
  "stats": {
    "total_tasks": 53,
    "open": 0,
    "in_progress": 17,
    "done": 26,
    "failed": 0
  }
}