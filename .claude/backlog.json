{
  "version": "1.0.0",
  "updated_at": "2025-12-12T16:31:43.138Z",
  "tasks": [
    {
      "id": "T-P8-001",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update TEMPLATE.project.md with decomposition guidance",
      "description": "Add section on task decomposition using ///LOCAL_TASKS format, reference DECOMPOSITION_POLICY.md, include atomic criteria reminder",
      "files_touched": [
        "docs/projects/TEMPLATE.project.md"
      ],
      "est_lines_changed": 30,
      "est_local_effort_mins": 20,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('docs/projects/TEMPLATE.project.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS') || !content.includes('DECOMPOSITION_POLICY')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current template structure",
        "DECOMPOSITION_POLICY.md reference"
      ],
      "outputs": [
        "Updated template with decomposition section"
      ],
      "constraints": [
        "Add section after 'Before Starting Each Phase'",
        "Include reference to .claude/DECOMPOSITION_POLICY.md",
        "Add atomic criteria reminder table",
        "Keep changes minimal, preserve existing structure"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 1,
          "lines_end": 100
        }
      ],
      "invariant_test": null,
      "assigned_at": "2025-12-12T05:58:50.636Z",
      "completed_at": "2025-12-12T06:01:03.937Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-002",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update program-manager.md agent guide",
      "description": "Add reference to decomposition policy enforcement in program manager responsibilities",
      "files_touched": [
        ".claude/agents/program-manager.md"
      ],
      "est_lines_changed": 15,
      "est_local_effort_mins": 15,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/agents/program-manager.md', 'utf-8'); if (!content.includes('DECOMPOSITION_POLICY') || !content.includes('atomic criteria')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current program-manager.md",
        "Decomposition policy requirements"
      ],
      "outputs": [
        "Updated agent guide with policy reference"
      ],
      "constraints": [
        "Add to responsibilities section",
        "Reference atomic criteria enforcement",
        "Keep tone consistent with existing content",
        "No structural changes"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 19,
          "lines_end": 31
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:02:30.588Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-003",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update process-specialist.md with decomposition audit",
      "description": "Add decomposition audit to process specialist capabilities, reference audit_decomposition.cjs",
      "files_touched": [
        ".claude/agents/process-specialist.md"
      ],
      "est_lines_changed": 20,
      "est_local_effort_mins": 18,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/agents/process-specialist.md', 'utf-8'); if (!content.includes('decomposition audit') || !content.includes('audit_decomposition.cjs')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current process-specialist.md",
        "audit_decomposition.cjs functionality"
      ],
      "outputs": [
        "Updated agent guide with audit capabilities"
      ],
      "constraints": [
        "Add decomposition audit to analysis capabilities",
        "Reference scripts/audit_decomposition.cjs",
        "Mention atomicity_report.json output",
        "Preserve existing structure"
      ],
      "needs_context": [
        {
          "path": "scripts/audit_decomposition.cjs",
          "lines_start": 1,
          "lines_end": 50
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:02:30.639Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-004",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update cto-decompose.md command to use ///LOCAL_TASKS format",
      "description": "Update output format section to specify ///LOCAL_TASKS JSON format instead of old task spec",
      "files_touched": [
        ".claude/commands/cto-decompose.md"
      ],
      "est_lines_changed": 25,
      "est_local_effort_mins": 20,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/commands/cto-decompose.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS') || content.includes('task-spec.schema.json')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current cto-decompose.md",
        "///LOCAL_TASKS format specification"
      ],
      "outputs": [
        "Updated command with new output format"
      ],
      "constraints": [
        "Replace task spec references with ///LOCAL_TASKS",
        "Include atomic criteria table",
        "Update example output to use new format",
        "Reference .claude/schemas/local-task.schema.json"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 34,
          "lines_end": 68
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:02:30.693Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-005",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update local.md to reference new protocol",
      "description": "Replace old task spec workflow with ///LOCAL_TASKS format and dispatcher.cjs references",
      "files_touched": [
        ".claude/commands/local.md"
      ],
      "est_lines_changed": 40,
      "est_local_effort_mins": 25,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/commands/local.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS') || !content.includes('dispatcher.cjs')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current local.md",
        "New dispatcher workflow"
      ],
      "outputs": [
        "Updated command with new workflow"
      ],
      "constraints": [
        "Replace auto-generate-task-spec.sh references with dispatcher.cjs",
        "Update workflow to: decompose â†’ dispatcher add â†’ dispatcher assign-next",
        "Keep metrics section intact",
        "Update examples to use ///LOCAL_TASKS format"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 71,
          "lines_end": 85
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:04:18.492Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-006",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update local-code.md with ///LOCAL_TASKS format",
      "description": "Update examples and workflow to use ///LOCAL_TASKS JSON format",
      "files_touched": [
        ".claude/commands/local-code.md"
      ],
      "est_lines_changed": 30,
      "est_local_effort_mins": 20,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/commands/local-code.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current local-code.md",
        "///LOCAL_TASKS examples"
      ],
      "outputs": [
        "Updated command with new format"
      ],
      "constraints": [
        "Update all examples to show ///LOCAL_TASKS format",
        "Reference dispatcher.cjs for task execution",
        "Preserve DeepSeek-specific guidance",
        "Keep usage examples practical"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 38,
          "lines_end": 65
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:04:18.563Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-007",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update local-refactor.md with ///LOCAL_TASKS format",
      "description": "Update refactoring task examples to use ///LOCAL_TASKS JSON format",
      "files_touched": [
        ".claude/commands/local-refactor.md"
      ],
      "est_lines_changed": 28,
      "est_local_effort_mins": 18,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/commands/local-refactor.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current local-refactor.md",
        "Refactoring task patterns"
      ],
      "outputs": [
        "Updated command with new format"
      ],
      "constraints": [
        "Update examples to ///LOCAL_TASKS format",
        "Show needs_context usage for refactoring",
        "Preserve Qwen-specific guidance",
        "Keep refactoring best practices section"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 87,
          "lines_end": 120
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:04:18.632Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-008",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update local-test.md with ///LOCAL_TASKS format",
      "description": "Update test generation examples to use ///LOCAL_TASKS JSON format with invariant_test protocol",
      "files_touched": [
        ".claude/commands/local-test.md"
      ],
      "est_lines_changed": 35,
      "est_local_effort_mins": 22,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/commands/local-test.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS') || !content.includes('invariant_test')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current local-test.md",
        "invariant_test protocol"
      ],
      "outputs": [
        "Updated command with new format and protocol"
      ],
      "constraints": [
        "Update examples to ///LOCAL_TASKS format",
        "Add invariant_test protocol explanation",
        "Show automatic test task creation",
        "Reference invariant-test-generator.cjs"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 122,
          "lines_end": 155
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:04:18.695Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-009",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update local-doc.md with ///LOCAL_TASKS format",
      "description": "Update documentation task examples to use ///LOCAL_TASKS JSON format",
      "files_touched": [
        ".claude/commands/local-doc.md"
      ],
      "est_lines_changed": 25,
      "est_local_effort_mins": 18,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/commands/local-doc.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current local-doc.md",
        "Documentation task patterns"
      ],
      "outputs": [
        "Updated command with new format"
      ],
      "constraints": [
        "Update examples to ///LOCAL_TASKS format",
        "Preserve Qwen-specific documentation guidance",
        "Show needs_context for API reference tasks",
        "Keep JSDoc best practices"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 34,
          "lines_end": 68
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:04:18.753Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-010",
      "parent_id": "decomposition-policy-phase8",
      "title": "Rewrite LOCAL_MODELS_GUIDE.md for new protocol",
      "description": "Comprehensive rewrite to document ///LOCAL_TASKS format, dispatcher CLI, atomic criteria, and all protocols",
      "files_touched": [
        ".claude/LOCAL_MODELS_GUIDE.md"
      ],
      "est_lines_changed": 200,
      "est_local_effort_mins": 45,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/LOCAL_MODELS_GUIDE.md', 'utf-8'); if (!content.includes('///LOCAL_TASKS') || !content.includes('dispatcher.cjs') || !content.includes('atomic criteria')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "DECOMPOSITION_POLICY.md",
        "All protocols",
        "Dispatcher CLI commands"
      ],
      "outputs": [
        "Completely rewritten guide"
      ],
      "constraints": [
        "Replace old task-spec workflow completely",
        "Document all dispatcher.cjs commands",
        "Include atomic criteria table",
        "Document needs_context, invariant_test, permission protocols",
        "Add troubleshooting section",
        "Include workflow diagrams",
        "Max 250 lines total"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 1,
          "lines_end": 212
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:06:15.835Z",
      "tests_passed": true
    },
    {
      "id": "T-P8-011",
      "parent_id": "decomposition-policy-phase8",
      "title": "Update AGENT_GUIDE.md with decomposition reference",
      "description": "Add section on decomposition policy enforcement for all agents",
      "files_touched": [
        ".claude/AGENT_GUIDE.md"
      ],
      "est_lines_changed": 20,
      "est_local_effort_mins": 15,
      "test_command": "node -e \"const fs = require('fs'); const content = fs.readFileSync('.claude/AGENT_GUIDE.md', 'utf-8'); if (!content.includes('DECOMPOSITION_POLICY')) process.exit(1);\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "Current AGENT_GUIDE.md",
        "Decomposition requirements for agents"
      ],
      "outputs": [
        "Updated guide with policy section"
      ],
      "constraints": [
        "Add decomposition policy section",
        "Reference atomic criteria requirement",
        "Add note about permission escalation",
        "Preserve existing agent documentation structure"
      ],
      "needs_context": [
        {
          "path": ".claude/DECOMPOSITION_POLICY.md",
          "lines_start": 1,
          "lines_end": 31
        }
      ],
      "invariant_test": null,
      "completed_at": "2025-12-12T06:06:51.630Z",
      "tests_passed": true
    },
    {
      "id": "T-001",
      "parent_id": "0.002.1212-local-model-enforcement",
      "title": "Create pre-write blocking hook",
      "description": "Create PreToolUse hook that blocks Edit/Write/NotebookEdit when file is assigned to local model in active project. This hook runs BEFORE the tool executes (unlike delegation-check.cjs which is PostToolUse) and can block the operation by exiting with code 1.",
      "files_touched": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "est_lines_changed": 200,
      "est_local_effort_mins": 30,
      "test_command": "node .claude/hooks/pre-write-delegation-check.cjs < test-input.json",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "done",
      "inputs": [
        "tool_input.file_path from stdin JSON"
      ],
      "outputs": [
        "Exit 0 (allow) or Exit 1 (block)"
      ],
      "constraints": [
        "#!/usr/bin/env node shebang",
        "Hook Type: PreToolUse (runs BEFORE tool executes)",
        "Read stdin as JSON containing tool_input",
        "Exit 0 to allow, Exit 1 to block",
        "Must be fast (<100ms)",
        "Include JSDoc header"
      ],
      "needs_context": [
        {
          "path": ".claude/hooks/delegation-check.cjs",
          "lines_start": 1,
          "lines_end": 191
        }
      ],
      "invariant_test": null,
      "assigned_at": "2025-12-12T08:17:47.903Z",
      "completed_at": "2025-12-12T08:26:42.392Z",
      "tests_passed": true
    },
    {
      "id": "T-TEST-001",
      "parent_id": "local-model-enforcement",
      "title": "Create test output file",
      "description": "Create a simple test file to verify dispatcher creates files correctly",
      "files_touched": [
        "test-dispatcher-output.js"
      ],
      "est_lines_changed": 10,
      "est_local_effort_mins": 5,
      "test_command": "node test-dispatcher-output.js",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "in_progress",
      "inputs": [],
      "outputs": [
        "Prints 'Dispatcher test successful!'"
      ],
      "constraints": [
        "Create a simple Node.js script",
        "Must export a function that returns 'Dispatcher test successful!'",
        "Include console.log statement",
        "File should be ~10 lines"
      ],
      "needs_context": [],
      "invariant_test": null,
      "assigned_at": "2025-12-12T15:58:33.355Z"
    },
    {
      "id": "T-ENF-001",
      "parent_id": null,
      "title": "Create pre-write blocking hook",
      "description": "Create PreToolUse hook that blocks Edit/Write when file assigned to local model. Read stdin as JSON, check if file is assigned to local model, exit 0 to allow or exit 1 to block.",
      "files_touched": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "est_lines_changed": 200,
      "est_local_effort_mins": 30,
      "test_command": "echo '{\"tool_input\":{\"file_path\":\"test.js\"}}' | node .claude/hooks/pre-write-delegation-check.cjs",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "in_progress",
      "inputs": [
        ".claude/hooks/delegation-check.cjs"
      ],
      "outputs": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "constraints": [
        "#!/usr/bin/env node shebang",
        "Hook Type: PreToolUse (runs BEFORE tool executes)",
        "Read stdin as JSON containing tool_input",
        "Exit 0 to allow, Exit 1 to block",
        "Must be fast (<100ms)",
        "Include JSDoc header"
      ],
      "assigned_at": "2025-12-12T16:21:11.354Z"
    },
    {
      "id": "T-ENF-002",
      "parent_id": "T-ENF-001",
      "title": "Add active project check logic",
      "description": "Add function getActiveProjectContent() to check if active project exists by reading .claude/projects.json and returning project file path and content, or null if no active project.",
      "files_touched": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "est_lines_changed": 40,
      "est_local_effort_mins": 15,
      "test_command": "node .claude/hooks/__tests__/pre-write-delegation-check.test.js",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "in_progress",
      "inputs": [
        ".claude/hooks/delegation-check.cjs",
        ".claude/projects.json"
      ],
      "outputs": [
        "getActiveProjectContent() function"
      ],
      "constraints": [
        "Read .claude/projects.json to get active project",
        "If no active project, return null",
        "Read active project file content",
        "Handle file not found gracefully",
        "Function name: getActiveProjectContent()",
        "Return: {projectFile: string, content: string} or null"
      ],
      "assigned_at": "2025-12-12T16:27:03.980Z"
    },
    {
      "id": "T-ENF-003",
      "parent_id": "T-ENF-001",
      "title": "Add file-to-task matching logic",
      "description": "Add function isFileAssignedToLocalModel(projectContent, filePath) to parse project markdown tables and check if file basename is assigned to deepseek, qwen, or local:* model.",
      "files_touched": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "est_lines_changed": 60,
      "est_local_effort_mins": 20,
      "test_command": "node .claude/hooks/__tests__/pre-write-delegation-check.test.js",
      "assigned_to": "local:deepseek",
      "priority": "P0",
      "status": "in_progress",
      "inputs": [
        ".claude/hooks/delegation-check.cjs"
      ],
      "outputs": [
        "isFileAssignedToLocalModel() function"
      ],
      "constraints": [
        "Parse project content for task tables",
        "Look for | Task | ... | Model | Status | format",
        "Check if file basename matches task file",
        "Check if Model column contains 'deepseek' or 'qwen' or 'local:'",
        "Function name: isFileAssignedToLocalModel(projectContent, filePath)",
        "Return: {assigned: boolean, taskId: string|null, model: string|null}"
      ],
      "assigned_at": "2025-12-12T16:27:51.830Z"
    },
    {
      "id": "T-ENF-004",
      "parent_id": "T-ENF-001",
      "title": "Add blocking exit logic",
      "description": "Add main execution logic that reads stdin JSON, calls getActiveProjectContent() and isFileAssignedToLocalModel(), then exits 1 to block if assigned to local model, or exits 0 to allow otherwise.",
      "files_touched": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "est_lines_changed": 50,
      "est_local_effort_mins": 15,
      "test_command": "node .claude/hooks/__tests__/pre-write-delegation-check.test.js",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "open",
      "inputs": [],
      "outputs": [
        "Main execution flow"
      ],
      "constraints": [
        "Read stdin JSON to get tool_input.file_path",
        "Call getActiveProjectContent()",
        "If no project, exit 0 (allow)",
        "Call isFileAssignedToLocalModel()",
        "If assigned to local model, print error and exit 1 (block)",
        "If not assigned, exit 0 (allow)",
        "Handle all errors gracefully (exit 0 on error)"
      ]
    },
    {
      "id": "T-ENF-005",
      "parent_id": "T-ENF-001",
      "title": "Create helpful error message",
      "description": "Add formatted error message function that displays box-formatted message with file name, task ID, assigned model, dispatcher commands, and policy reference when blocking occurs.",
      "files_touched": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "est_lines_changed": 30,
      "est_local_effort_mins": 10,
      "test_command": "echo '{\"tool_input\":{\"file_path\":\"test.js\"}}' | node .claude/hooks/pre-write-delegation-check.cjs 2>&1 | grep 'ðŸš«'",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "open",
      "inputs": [
        ".claude/hooks/delegation-check.cjs"
      ],
      "outputs": [
        "Error message formatting function"
      ],
      "constraints": [
        "Box format with borders (like delegation-check.cjs lines 163-179)",
        "Include: file name, task ID, assigned model",
        "Show dispatcher commands to use instead",
        "Reference DECOMPOSITION_POLICY.md Section 10",
        "Error icon: ðŸš«",
        "Keep under 15 lines tall"
      ]
    },
    {
      "id": "T-ENF-006",
      "parent_id": "T-ENF-001",
      "title": "Register hooks in settings",
      "description": "Add PreToolUse hook registrations for Edit, Write, and NotebookEdit tools in .vscode/settings.json pointing to .claude/hooks/pre-write-delegation-check.cjs",
      "files_touched": [
        ".vscode/settings.json"
      ],
      "est_lines_changed": 10,
      "est_local_effort_mins": 5,
      "test_command": "node -e \"JSON.parse(require('fs').readFileSync('.vscode/settings.json'))\"",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "open",
      "inputs": [
        ".vscode/settings.json"
      ],
      "outputs": [
        "Updated settings.json with hook registrations"
      ],
      "constraints": [
        "Add to hooks object",
        "Register for: PreToolUse:Edit, PreToolUse:Write, PreToolUse:NotebookEdit",
        "Path: .claude/hooks/pre-write-delegation-check.cjs",
        "Maintain JSON formatting",
        "Don't duplicate if already exists"
      ]
    },
    {
      "id": "T-ENF-007",
      "parent_id": "T-ENF-001",
      "title": "Write tests for blocking hook",
      "description": "Write unit tests using node:test for pre-write blocking hook covering: no active project allows, file not in project allows, file assigned to local model blocks, file assigned to claude allows, error handling allows.",
      "files_touched": [
        ".claude/hooks/__tests__/pre-write-delegation-check.test.js"
      ],
      "est_lines_changed": 150,
      "est_local_effort_mins": 30,
      "test_command": "node .claude/hooks/__tests__/pre-write-delegation-check.test.js",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "open",
      "inputs": [
        ".claude/hooks/pre-write-delegation-check.cjs"
      ],
      "outputs": [
        ".claude/hooks/__tests__/pre-write-delegation-check.test.js"
      ],
      "constraints": [
        "Use node:test (built-in test runner)",
        "Test: No active project â†’ allows (exit 0)",
        "Test: File not in project â†’ allows",
        "Test: File assigned to local model â†’ blocks (exit 1)",
        "Test: File assigned to claude â†’ allows",
        "Test: Error handling â†’ allows (fail open)",
        "Mock file reads and stdin"
      ]
    },
    {
      "id": "T-ENF-008",
      "parent_id": null,
      "title": "Reword backlog escape hatch note",
      "description": "In BACKLOG.md, replace the note that mentions 'outputs code without creating files' with policy-reinforcing text that instructs to fix the underlying dispatcher issue via recursive decomposition rather than bypassing delegation.",
      "files_touched": [
        ".claude/BACKLOG.md"
      ],
      "est_lines_changed": 5,
      "est_local_effort_mins": 5,
      "test_command": "grep -q 'dispatcher integration bug' .claude/BACKLOG.md",
      "assigned_to": "local:qwen",
      "priority": "P0",
      "status": "open",
      "inputs": [
        ".claude/BACKLOG.md"
      ],
      "outputs": [
        "Updated .claude/BACKLOG.md with policy-reinforcing note"
      ],
      "constraints": [
        "Find and replace note starting with '*Note: Local model delegation attempted...'",
        "Replace with: '*Note: If local model outputs code without creating files, this indicates a dispatcher integration bug that must be fixed per DECOMPOSITION_POLICY.md Section 9 (recursive decomposition). Do NOT bypass delegation - troubleshoot and fix the underlying issue.'",
        "Maintain markdown formatting",
        "Keep in same location (around line 70)"
      ]
    }
  ],
  "projects": {
    "decomposition-policy": {
      "name": "Comprehensive Decomposition Policy Integration",
      "status": "active",
      "phase": 2,
      "total_phases": 10,
      "created_at": "2025-12-11T00:00:00Z",
      "file": "docs/projects/0.001.1211-decomposition-policy.project.md"
    },
    "primitive-actions-ui": {
      "name": "Primitive Actions UI",
      "status": "active",
      "phase": 1,
      "total_phases": 4,
      "created_at": "2025-12-11T00:00:00Z",
      "file": "docs/projects/1.001.1211-primitive-actions-ui.project.md"
    }
  },
  "stats": {
    "total_tasks": 21,
    "open": 5,
    "in_progress": 4,
    "done": 12,
    "failed": 0
  }
}